var ot=Object.defineProperty;var nt=(c,a,n)=>a in c?ot(c,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[a]=n;var w=(c,a,n)=>(nt(c,typeof a!="symbol"?a+"":a,n),n);import{s as rt,o as it,n as ct}from"../chunks/scheduler.b0c1c2c3.js";import{S as lt,i as pt,r as q,u as z,v as D,d as I,t as A,w as S,g as mt,s as K,h as ut,z as dt,c as N,a as k,f as P}from"../chunks/index.f44ac6f0.js";import{O as X,V as T,i as ft,j as ht,B as wt,k as $t,M as gt,l as xt,m as vt,S as yt,H as Et,r as Ct,n as _t,Q as R,o as Mt,E as bt,s as Vt,u as Ht,A as kt,h as Pt,p as Tt,C as Rt}from"../chunks/setup.31a16d21.js";import{G as qt}from"../chunks/index.7cef8274.js";import{D as zt,C as Dt}from"../chunks/code.5b2e6c9d.js";const It=c=>new _t({color:c,toneMapped:!1});class At extends X{constructor(n,e,r={}){var j,J;super();w(this,"isViewHelper",!0);w(this,"animating",!1);w(this,"center",new T);w(this,"turnRate",2*Math.PI);w(this,"dispose");const p=["x","y","z","x","y","z"],{position:m="top-right"}=r,u=e.domElement,o=new ft,d=window.devicePixelRatio,Y=r.colors??["#ff3653","#8adb00","#2c8fff"],x=new T,L=new R,_=new Mt,v=new R,M=new R,h=new bt,Q=new ht;let b=0;const B=new wt(.5,.05,.05).translate(.4,0,0),G=Y.map(t=>new $t(t)),y=G.map(t=>new gt(B,It(t))),$=new X,O=new xt(-2,2,2,-2,0,4);O.position.set(0,0,2);const V=new T,i=220,g=document.createElement("div");u.before(g),(j=y[1])==null||j.rotation.set(0,0,Math.PI/2),(J=y[2])==null||J.rotation.set(0,-Math.PI/2,0),y.forEach(t=>this.add(t));const E=p.map((t,s)=>{const l=s>2?-1:1,C=new vt(G[s%3],l===1?t:void 0),f=new yt(C);return f.position[t]=l,f.scale.setScalar(l===1?1:.8),f.userData={name:t,sign:l},f});E.forEach(t=>this.add(t));const F=E.map(t=>{const s=document.createElement("div");return s.dataset.axis=t.userData.name,s.dataset.sign=t.userData.sign===1?"":"-",s.style.cssText=`
        position: absolute;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        cursor: pointer;
      `,new Et({element:s,object3D:t,target:g})}),Z=Ct(u,t=>{o.x=t.width,o.y=t.height;const s=window.devicePixelRatio;g.style.cssText=`
        position: absolute;
        top: ${u.offsetTop}px;
        left: ${u.offsetLeft+(t.width-i/s)}px;
        width: ${i/s}px;
        height: ${i/s}px;
      `});let U=!1;const H=e.render,tt=t=>{switch(t){case"x":return h.set(0,Math.PI*.5,0);case"y":return h.set(-Math.PI*.5,0,0);case"z":return h.set(0,0,0);case"-x":return h.set(0,-Math.PI*.5,0);case"-y":return h.set(Math.PI*.5,0,0);case"-z":return h.set(0,Math.PI,0)}},et=()=>{this.quaternion.copy(n.quaternion).invert(),V.set(0,0,1).applyQuaternion(n.quaternion),p.forEach((l,C)=>{const f=E[C];f!==void 0&&(C<3?f.material.opacity=V[l]>=0?1:.5:f.material.opacity=V[l]<0?1:.5)}),U=e.autoClear,e.autoClear=!1,e.clearDepth(),e.getViewport(Q);const t=o.x*d,s=o.y*d;switch(m){case"top-right":{e.setViewport(t-i,s-i,i,i);break}case"bottom-right":{e.setViewport(t-i,0,i,i);break}case"bottom-left":{e.setViewport(0,0,i,i);break}case"top-left":{e.setViewport(0,s-i,i,i);break}}H.call(e,this,O),e.setViewport(Q),e.autoClear=U},st=()=>{const s=_.getDelta()*this.turnRate;v.rotateTowards(M,s),n.position.set(0,0,1).applyQuaternion(v).multiplyScalar(b).add(this.center),n.quaternion.rotateTowards(L,s),v.angleTo(M)===0&&(this.animating=!1,_.stop())},at=(t,s,l)=>{x.set(0,0,0),x[t]=s==="-"?-1:1,L.setFromEuler(tt(`${s}${t}`)),b=n.position.distanceTo(l),x.multiplyScalar(b).add(l),$.position.copy(l),$.lookAt(n.position),v.copy($.quaternion),$.lookAt(x),M.copy($.quaternion)},W=t=>{if(this.animating)return;const{axis:s,sign:l}=t.currentTarget.dataset;at(s,l,this.center),_.start(),this.animating=!0};F.forEach(t=>{var s;return(s=t.element)==null?void 0:s.addEventListener("click",W)}),e.render=(...t)=>{H.call(e,...t),et(),this.animating&&st()},this.dispose=()=>{e.render=H,F.forEach(t=>{var s;(s=t.element)==null||s.remove(),t.dispose()}),g.removeEventListener("click",W),g.remove(),Z.disconnect(),B.dispose(),y.forEach(t=>t.material.dispose()),E.forEach(t=>{var s;(s=t.material.map)==null||s.dispose(),t.material.dispose()})}}}const St=`
import * as THREE from 'three'
import { ViewHelper } from 'trzy'

const camera = new THREE.PerspectiveCamera()
const renderer = new THREE.WebGLRenderer()
const helper = new ViewHelper(camera, renderer)
`;function Lt(c){let a,n="Creates a HUD view helper.",e,r,p,m,u;return r=new Rt({}),m=new Dt({props:{code:St}}),{c(){a=mt("p"),a.textContent=n,e=K(),q(r.$$.fragment),p=K(),q(m.$$.fragment)},l(o){a=ut(o,"P",{"data-svelte-h":!0}),dt(a)!=="svelte-3wvkbi"&&(a.textContent=n),e=N(o),z(r.$$.fragment,o),p=N(o),z(m.$$.fragment,o)},m(o,d){k(o,a,d),k(o,e,d),D(r,o,d),k(o,p,d),D(m,o,d),u=!0},p:ct,i(o){u||(I(r.$$.fragment,o),I(m.$$.fragment,o),u=!0)},o(o){A(r.$$.fragment,o),A(m.$$.fragment,o),u=!1},d(o){o&&(P(a),P(e),P(p)),S(r,o),S(m,o)}}}function Qt(c){let a,n;return a=new zt({props:{title:"ViewHelper",$$slots:{default:[Lt]},$$scope:{ctx:c}}}),{c(){q(a.$$.fragment)},l(e){z(a.$$.fragment,e)},m(e,r){D(a,e,r),n=!0},p(e,[r]){const p={};r&1&&(p.$$scope={dirty:r,ctx:e}),a.$set(p)},i(e){n||(I(a.$$.fragment,e),n=!0)},o(e){A(a.$$.fragment,e),n=!1},d(e){S(a,e)}}}function Bt(c){return it(()=>{const a=Vt();a.autoRotate=!1;const{scene:n,camera:e,renderer:r}=Ht(),p=new At(e.current,r);return n.add(new qt(.1,1,"#ccc")),n.add(new kt),n.add(Pt(Tt({color:"turquoise"}),.5,.4,.3)),()=>{a.autoRotate=!0,p.dispose()}}),[]}class Jt extends lt{constructor(a){super(),pt(this,a,Bt,Qt,rt,{})}}export{Jt as component};
