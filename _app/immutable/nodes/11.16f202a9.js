import{s as M,o as R}from"../chunks/scheduler.b0c1c2c3.js";import{S as q,i as A,r as y,u as w,v as b,d as k,t as _,w as h,g as E,s as K,h as L,z as G,c as C,a as m,f as p,m as H,j as I,n as N,k as V,x as Y,o as j}from"../chunks/index.f44ac6f0.js";import{s as B,u as F,h as J,c as O,A as T,b as U,V as Q,C as W}from"../chunks/setup.31a16d21.js";import{G as X}from"../chunks/index.7cef8274.js";import{D as Z,C as ee}from"../chunks/code.2d5abe60.js";const f=new Set;let z=!1,g=!1;const r={keys:{},controlling:!1,shift:0,space:0,r:0,x:0,y:0},$=(o,e)=>{const n=o.toLowerCase();switch(n){case"s":case"arrowdown":{r.y=-1*e;break}case"w":case"arrowup":{r.y=1*e;break}case"a":case"arrowleft":{r.x=-1*e;break}case"d":case"arrowright":{r.x=1*e;break}case" ":{r.space=1*e;break}case"q":{r.r=1*e;break}case"e":{r.r=-1*e;break}case"shift":{r.shift=1*e;break}}e===1?r.keys[n]=!0:delete r.keys[n]},D=o=>{g&&(o.preventDefault(),o.stopImmediatePropagation());const e=o.key.toLowerCase();r.controlling=!0,f.add(e),f.forEach(n=>$(n,1))},P=o=>{g&&(o.preventDefault(),o.stopImmediatePropagation());const e=o.key.toLowerCase();f.delete(e),$(e,0),f.forEach(n=>$(n,1)),f.size===0&&(r.controlling=!1)},S=()=>{f.forEach(o=>$(o,0)),f.clear()},te=()=>{window.removeEventListener("keydown",D),window.removeEventListener("keyup",P),window.addEventListener("blur",S),z=!1},ae=(o={})=>(g=o.preventDefault??!1,z||(window.addEventListener("keydown",D),window.addEventListener("keyup",P),window.addEventListener("blur",S)),{keyboard:r,disposeKeyboard:te}),se=`
import { useKeyboard } from 'trzy'

const { keyboard, disposeKeyboard } = useKeyboard({ preventDefault: true })

// Later
disposeKeyboard()
`;function oe(o){let e,n;return{c(){e=E("pre"),n=H(o[0]),this.h()},l(t){e=L(t,"PRE",{class:!0});var a=I(e);n=N(a,o[0]),a.forEach(p),this.h()},h(){V(e,"class","absolute top-2 left-2 text-xs")},m(t,a){m(t,e,a),Y(e,n)},p(t,a){a&1&&j(n,t[0])},d(t){t&&p(e)}}}function ne(o){let e,n="Normalizes common keyboard inputs for games.",t,a,c,i,d;return a=new W({props:{$$slots:{default:[oe]},$$scope:{ctx:o}}}),i=new ee({props:{code:se}}),{c(){e=E("p"),e.textContent=n,t=K(),y(a.$$.fragment),c=K(),y(i.$$.fragment)},l(s){e=L(s,"P",{"data-svelte-h":!0}),G(e)!=="svelte-8sxx9"&&(e.textContent=n),t=C(s),w(a.$$.fragment,s),c=C(s),w(i.$$.fragment,s)},m(s,l){m(s,e,l),m(s,t,l),b(a,s,l),m(s,c,l),b(i,s,l),d=!0},p(s,l){const u={};l&3&&(u.$$scope={dirty:l,ctx:s}),a.$set(u)},i(s){d||(k(a.$$.fragment,s),k(i.$$.fragment,s),d=!0)},o(s){_(a.$$.fragment,s),_(i.$$.fragment,s),d=!1},d(s){s&&(p(e),p(t),p(c)),h(a,s),h(i,s)}}}function re(o){let e,n;return e=new Z({props:{title:"useKeyboard",$$slots:{default:[ne]},$$scope:{ctx:o}}}),{c(){y(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,a){b(e,t,a),n=!0},p(t,[a]){const c={};a&3&&(c.$$scope={dirty:a,ctx:t}),e.$set(c)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){h(e,t)}}}function ce(o,e,n){let t="";return R(()=>{const a=B();a.enabled=a.autoRotate=!1;const{scene:c,camera:i}=F(),d=J(new O({color:"hotpink"}),.25,.25,.25);c.add(new X(.1,1,"#ccc").translateY(-.125)),c.add(new T().translateY(-.125)),c.add(d),a.target=d.position;const{keyboard:s,disposeKeyboard:l}=ae(),{stop:u}=U(()=>{const x=s.x/50,v=-(s.y/50);d.position.x+=x,d.position.z+=v,i.current.position.x+=x,i.current.position.z+=v,n(0,t=JSON.stringify(s,void 0,"  "))});return()=>{a.enabled=a.autoRotate=!0,a.target=new Q,u(),l()}}),[t]}class ue extends q{constructor(e){super(),A(this,e,ce,re,M,{})}}export{ue as component};
