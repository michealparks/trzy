import{s as y,o as L}from"../chunks/scheduler.b0c1c2c3.js";import{S as T,i as D,r as h,u as _,v as G,d as S,t as k,w,g as C,s as x,h as E,z as M,c as z,a as v,f as g,m as P,j as R,n as A,k as N,x as V,o as j}from"../chunks/index.f44ac6f0.js";import{s as q,u as F,p as H,c as I,b as J,V as O,C as K}from"../chunks/setup.ed225109.js";import{G as Q}from"../chunks/index.fcaed192.js";import{D as U,C as W}from"../chunks/code.d409985a.js";const Z=e=>({player:e,id:"",A:0,B:0,X:0,Y:0,back:0,connected:!1,leftBumper:0,leftStickButton:0,leftStickX:0,leftStickY:0,leftTrigger:0,padX:0,padY:0,rightBumper:0,rightStickButton:0,rightStickX:0,rightStickY:0,rightTrigger:0,start:0});let B=!1;const d=[1,2,3,4].map(e=>Z(e)),b=(e,{axes:t,buttons:a})=>{var n,s,c,o,l,r,i,m,p,$,u,f;e.leftStickX=t[0]??0,e.leftStickY=t[1]??0,e.rightStickX=t[2]??0,e.rightStickY=t[3]??0,e.A=((n=a[0])==null?void 0:n.value)??0,e.B=((s=a[1])==null?void 0:s.value)??0,e.X=((c=a[2])==null?void 0:c.value)??0,e.Y=((o=a[3])==null?void 0:o.value)??0,e.leftBumper=((l=a[4])==null?void 0:l.value)??0,e.rightBumper=((r=a[5])==null?void 0:r.value)??0,e.leftTrigger=((i=a[6])==null?void 0:i.value)??0,e.rightTrigger=((m=a[7])==null?void 0:m.value)??0,e.back=((p=a[8])==null?void 0:p.value)??0,e.start=(($=a[9])==null?void 0:$.value)??0,e.leftStickButton=((u=a[10])==null?void 0:u.value)??0,e.rightStickButton=((f=a[11])==null?void 0:f.value)??0,e.padY=-a[12].value||a[13].value,e.padX=-a[14].value||a[15].value},ee=()=>{navigator.getGamepads().forEach((e,t)=>{const a=d[t];e===null||a===void 0||b(a,e)})},X=e=>{const{id:t}=e.gamepad;d.forEach(a=>{t===a.id&&(a.connected=!1)})},Y=()=>{navigator.getGamepads().forEach((e,t)=>{d[t].connected=e!==null,d[t].id=(e==null?void 0:e.id)??""})},te=()=>{window.removeEventListener("gamepadconnected",Y),window.removeEventListener("gamepaddisconnected",X),B=!1},ae=()=>(B||(window.addEventListener("gamepadconnected",Y),window.addEventListener("gamepaddisconnected",X),B=!0),{gamepad:d[0],gamepads:d,updateGamepads:ee,disposeGamepads:te}),ne=`
import { useGamepad } from 'trzy'

const { gamepad, gamepads, updateGamepads, disposeGamepads } = useGamepad()

// In your game loop
updateGamepads()

// Later
disposeGamepads()
`;function se(e){let t,a;return{c(){t=C("pre"),a=P(e[0]),this.h()},l(n){t=E(n,"PRE",{class:!0});var s=R(t);a=A(s,e[0]),s.forEach(g),this.h()},h(){N(t,"class","absolute top-2 left-2 text-xs")},m(n,s){v(n,t,s),V(t,a)},p(n,s){s&1&&j(a,n[0])},d(n){n&&g(t)}}}function re(e){let t,a="Normalizes gamepad input.",n,s,c,o,l;return s=new K({props:{$$slots:{default:[se]},$$scope:{ctx:e}}}),o=new W({props:{code:ne}}),{c(){t=C("p"),t.textContent=a,n=x(),h(s.$$.fragment),c=x(),h(o.$$.fragment)},l(r){t=E(r,"P",{"data-svelte-h":!0}),M(t)!=="svelte-w1mucb"&&(t.textContent=a),n=z(r),_(s.$$.fragment,r),c=z(r),_(o.$$.fragment,r)},m(r,i){v(r,t,i),v(r,n,i),G(s,r,i),v(r,c,i),G(o,r,i),l=!0},p(r,i){const m={};i&3&&(m.$$scope={dirty:i,ctx:r}),s.$set(m)},i(r){l||(S(s.$$.fragment,r),S(o.$$.fragment,r),l=!0)},o(r){k(s.$$.fragment,r),k(o.$$.fragment,r),l=!1},d(r){r&&(g(t),g(n),g(c)),w(s,r),w(o,r)}}}function oe(e){let t,a;return t=new U({props:{title:"useGamepad",$$slots:{default:[re]},$$scope:{ctx:e}}}),{c(){h(t.$$.fragment)},l(n){_(t.$$.fragment,n)},m(n,s){G(t,n,s),a=!0},p(n,[s]){const c={};s&3&&(c.$$scope={dirty:s,ctx:n}),t.$set(c)},i(n){a||(S(t.$$.fragment,n),a=!0)},o(n){k(t.$$.fragment,n),a=!1},d(n){w(t,n)}}}function ie(e,t,a){let n="";return L(()=>{const s=q();s.enabled=s.autoRotate=!1;const{scene:c,camera:o}=F(),{gamepad:l,updateGamepads:r,disposeGamepads:i}=ae(),m=H(new I({color:"hotpink"}),.25,.25,.25),p=new Q;p.color="#ccc",p.cellSize=.1,p.position.y=-.125,c.add(m,p),s.target=m.position;const{stop:$}=J(()=>{r();const u=l.leftStickX/50,f=l.leftStickY/50;m.position.x+=u,m.position.z+=f,o.current.position.x+=u,o.current.position.z+=f,a(0,n=JSON.stringify(l,void 0,"  "))});return()=>{s.enabled=s.autoRotate=!0,s.target=new O,$(),i()}}),[n]}class ue extends T{constructor(t){super(),D(this,t,ie,oe,y,{})}}export{ue as component};
