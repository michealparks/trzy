{"version":3,"file":"gamepad.stories-c43efd87.js","sources":["../../src/components/controls/gamepad.ts"],"sourcesContent":["export const gamepadManager = () => {\n  const gamepad = {\n    A: 0,\n    B: 0,\n    X: 0,\n    Y: 0,\n    back: 0,\n    connected: false,\n    leftBumper: 0,\n    leftStickButton: 0,\n    leftStickX: 0,\n    leftStickY: 0,\n    leftTrigger: 0,\n    padX: 0,\n    padY: 0,\n    rightBumper: 0,\n    rightStickButton: 0,\n    rightStickX: 0,\n    rightStickY: 0,\n    rightTrigger: 0,\n    start: 0,\n  }\n\n  const handleGamepad = ({ axes, buttons }: Gamepad) => {\n    gamepad.leftStickX = axes[0]!\n    gamepad.leftStickY = axes[1]!\n    gamepad.rightStickX = axes[2]!\n    gamepad.rightStickY = axes[3]!\n  \n    gamepad.A = buttons[0]!.value\n    gamepad.B = buttons[1]!.value\n    gamepad.X = buttons[2]!.value\n    gamepad.Y = buttons[3]!.value\n  \n    gamepad.leftBumper = buttons[4]!.value\n    gamepad.rightBumper = buttons[5]!.value\n    gamepad.leftTrigger = buttons[6]!.value\n    gamepad.rightTrigger = buttons[7]!.value\n  \n    gamepad.back = buttons[8]!.value\n    gamepad.start = buttons[9]!.value\n  \n    gamepad.leftStickButton = buttons[10]!.value\n    gamepad.rightStickButton = buttons[11]!.value\n  \n    gamepad.padY = -buttons[12]!.value || buttons[13]!.value\n    gamepad.padX = -buttons[14]!.value || buttons[15]!.value\n  }\n\n  const updateGamepad = () => {\n    const [pad1, pad2] = window.navigator.getGamepads()\n  \n    if (pad1 !== null && pad1 !== undefined) {\n      handleGamepad(pad1)\n    }\n  \n    if (pad2 !== null && pad2 !== undefined) {\n      handleGamepad(pad2)\n    }\n  }\n\n  const handleGamepadDisconnected = () => {\n    gamepad.connected = false\n  }\n  \n  const handleGamepadConnected = () => {\n    const [pad1, pad2] = navigator.getGamepads()\n  \n    if (\n      (pad1 === null || pad1 === undefined) &&\n      (pad2 === null || pad2 === undefined)\n    ) {\n      return\n    }\n  \n    gamepad.connected = true\n\n    window.addEventListener('gamepaddisconnected', handleGamepadDisconnected)\n  }\n\n  const disposeGamepad = () => {\n    window.removeEventListener('gamepadconnected', handleGamepadConnected)\n    window.removeEventListener('gamepaddisconnected', handleGamepadDisconnected)\n  }\n\n  window.addEventListener('gamepadconnected', handleGamepadConnected)\n\n  return { gamepad, updateGamepad, disposeGamepad }\n}\n"],"names":["gamepadManager","gamepad","handleGamepad","axes","buttons","updateGamepad","pad1","pad2","handleGamepadDisconnected","handleGamepadConnected","disposeGamepad"],"mappings":"4BAAO,MAAMA,EAAiB,IAAM,CAClC,MAAMC,EAAU,CACd,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,KAAM,EACN,UAAW,GACX,WAAY,EACZ,gBAAiB,EACjB,WAAY,EACZ,WAAY,EACZ,YAAa,EACb,KAAM,EACN,KAAM,EACN,YAAa,EACb,iBAAkB,EAClB,YAAa,EACb,YAAa,EACb,aAAc,EACd,MAAO,CAAA,EAGHC,EAAgB,CAAC,CAAE,KAAAC,EAAM,QAAAC,KAAuB,CAC5CH,EAAA,WAAaE,EAAK,CAAC,EACnBF,EAAA,WAAaE,EAAK,CAAC,EACnBF,EAAA,YAAcE,EAAK,CAAC,EACpBF,EAAA,YAAcE,EAAK,CAAC,EAEpBF,EAAA,EAAIG,EAAQ,CAAC,EAAG,MAChBH,EAAA,EAAIG,EAAQ,CAAC,EAAG,MAChBH,EAAA,EAAIG,EAAQ,CAAC,EAAG,MAChBH,EAAA,EAAIG,EAAQ,CAAC,EAAG,MAEhBH,EAAA,WAAaG,EAAQ,CAAC,EAAG,MACzBH,EAAA,YAAcG,EAAQ,CAAC,EAAG,MAC1BH,EAAA,YAAcG,EAAQ,CAAC,EAAG,MAC1BH,EAAA,aAAeG,EAAQ,CAAC,EAAG,MAE3BH,EAAA,KAAOG,EAAQ,CAAC,EAAG,MACnBH,EAAA,MAAQG,EAAQ,CAAC,EAAG,MAEpBH,EAAA,gBAAkBG,EAAQ,EAAE,EAAG,MAC/BH,EAAA,iBAAmBG,EAAQ,EAAE,EAAG,MAEhCH,EAAA,KAAO,CAACG,EAAQ,EAAE,EAAG,OAASA,EAAQ,EAAE,EAAG,MAC3CH,EAAA,KAAO,CAACG,EAAQ,EAAE,EAAG,OAASA,EAAQ,EAAE,EAAG,KAAA,EAG/CC,EAAgB,IAAM,CAC1B,KAAM,CAACC,EAAMC,CAAI,EAAI,OAAO,UAAU,cAElCD,GAAS,MACXJ,EAAcI,CAAI,EAGhBC,GAAS,MACXL,EAAcK,CAAI,CACpB,EAGIC,EAA4B,IAAM,CACtCP,EAAQ,UAAY,EAAA,EAGhBQ,EAAyB,IAAM,CACnC,KAAM,CAACH,EAAMC,CAAI,EAAI,UAAU,YAAY,EAGxCD,GAAS,MACTC,GAAS,OAKZN,EAAQ,UAAY,GAEb,OAAA,iBAAiB,sBAAuBO,CAAyB,EAAA,EAGpEE,EAAiB,IAAM,CACpB,OAAA,oBAAoB,mBAAoBD,CAAsB,EAC9D,OAAA,oBAAoB,sBAAuBD,CAAyB,CAAA,EAGtE,cAAA,iBAAiB,mBAAoBC,CAAsB,EAE3D,CAAE,QAAAR,EAAS,cAAAI,EAAe,eAAAK,EACnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}